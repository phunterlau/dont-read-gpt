# Discord 知识机器人使用指南

## 🤖 机器人简介

这是一个功能强大的 Discord 知识管理机器人，能够自动处理网页链接、提取内容、生成摘要，并提供智能搜索功能。机器人支持多种内容源，包括 ArXiv 论文、GitHub 仓库、YouTube 视频等。

## 📋 可用命令

### 🔍 搜索命令

#### `!grep <搜索词>`
**功能：** 全文搜索文档内容和摘要  
**说明：** 不区分大小写的文本搜索，搜索所有已索引的内容  
**示例：**
```
!grep machine learning
!grep "神经网络"
!grep ChatGPT
!grep 人工智能
```
**搜索结果包含：** 文档标题、URL、时间戳、关键词、摘要片段

---

#### `!egrep <关键词>`
**功能：** 关键词搜索  
**说明：** 在已提取的关键词中进行搜索，支持模糊匹配  
**示例：**
```
!egrep ChatGPT
!egrep "Large Language Models"
!egrep 深度学习
!egrep AutoML
```
**特点：** 会高亮显示匹配的关键词，显示相关文档的元数据

---

### 📥 内容处理命令

#### `!wget <网址>` 或直接发送网址
**功能：** 下载并处理网页内容  
**说明：** 自动检测内容类型，生成 AI 摘要，提取关键词，保存到数据库  
**示例：**
```
!wget https://arxiv.org/abs/2304.14979
!wget https://github.com/microsoft/vscode
!wget https://www.youtube.com/watch?v=xyz123
```

**直接发送网址：**
```
https://arxiv.org/abs/2304.14979
https://news.ycombinator.com/item?id=123456
https://huggingface.co/microsoft/DialoGPT-medium
```

**支持的网站类型：**
- 📄 ArXiv 学术论文（特殊学术分析）
- 💻 GitHub 仓库和笔记本
- 🎥 YouTube 视频（提取字幕）
- 🤗 Hugging Face 模型页面
- 📱 微信文章
- 🌐 普通网页

**特殊功能：**
- ArXiv 论文会使用专门的学术分析提示词
- 自动生成适合 Obsidian 的 markdown 格式
- 创建关键词内部链接

---

### 📊 信息查询命令

#### `!stats`
**功能：** 显示数据库统计信息  
**说明：** 展示文档数量、关键词统计、文档类型分布等  
**示例：**
```
!stats
```

**显示内容：**
- 总文档数量（新旧系统合并）
- 关键词数量统计
- 文档类型分布（arxiv、github、youtube 等）
- 热门关键词
- 最近添加的文档
- 数据库大小信息

---

#### `!tail`
**功能：** 显示最近添加的3个文档  
**说明：** 快速查看最新处理的内容  
**示例：**
```
!tail
```

**显示信息：**
- 最新3个文档的 URL
- 添加时间戳
- 文档类型
- 来源系统标识

---

### 🔧 管理命令

#### `!related <文档ID>`
**功能：** 查找相关文档  
**说明：** 基于共同关键词找到相关的文档  
**示例：**
```
!related 123
!related 456
```

**工作原理：** 分析指定文档的关键词，找到具有相似关键词的其他文档

---

#### `!index`
**功能：** 重新索引文档（旧系统）  
**说明：** 重建旧索引系统的搜索索引  
**示例：**
```
!index
```

**注意：** 主要用于维护旧的 CSV 索引系统

---

#### `!migrate`
**功能：** 数据迁移  
**说明：** 将旧 CSV 数据迁移到新的 SQLite 数据库  
**示例：**
```
!migrate
```

**用途：** 系统升级时的数据迁移工具

---

#### `!mem <研究兴趣>` 或 `!mem --show` 或 `!mem --clear`

**功能：** 存储研究偏好以获得个性化的 arXiv 论文摘要  
**说明：** 存储您的研究兴趣，为 arXiv 论文获得个性化的"为什么您应该阅读这篇文章"部分  

**设置您的偏好：**

```discord
!mem 我对机器学习和神经网络感兴趣
!mem 我研究 transformer 架构和自然语言处理
!mem 我的研究重点是计算机视觉和深度学习
```

**查看您的档案：**

```discord
!mem --show
```

**清除您的档案：**

```discord
!mem --clear
```

**个性化工作原理：**

- 设置偏好后，arXiv 论文将包含个性化的"🤔 为什么您应该阅读这篇文章"部分
- 机器人会分析论文是否符合您的兴趣，并解释为什么它与您相关
- 个性化是用户特定的，不会影响其他用户的缓存摘要
- 非 arXiv 内容不会被个性化
- AI 只有在论文真正与您的兴趣相关时才会添加该部分

**示例工作流程：**

1. `!mem 我对 transformer 架构和注意力机制感兴趣`
2. `https://arxiv.org/abs/1706.03762`（发送 Attention Is All You Need 论文的 URL）
3. 您将看到一个个性化部分，解释为什么这篇论文与您的研究兴趣相关！

---

#### `!whoami`
**功能：** 显示当前用户信息  
**说明：** 显示您的 Discord 用户 ID、用户名和文档数量  
**示例：**
```
!whoami
```

**显示内容：**
- 用户名和显示名称
- Discord 用户 ID
- 账户创建日期
- 您添加到数据库的文档数量
- 用户头像（如果有）

---

## 🎯 使用技巧

### 💡 搜索技巧
1. **使用引号**：搜索确切短语 `!grep "machine learning"`
2. **关键词搜索**：使用 `!egrep` 搜索提取的关键词
3. **URL 搜索**：在搜索词中包含域名来过滤特定网站

### 🔗 URL 处理技巧
1. **直接粘贴**：直接发送 URL 链接，无需 `!wget` 命令
2. **批量处理**：可以连续发送多个链接
3. **ArXiv 优化**：ArXiv 论文会自动使用学术分析模式

### 📚 内容组织
1. **关键词关联**：系统自动提取关键词建立文档间联系
2. **时间序列**：使用 `!tail` 查看最近活动
3. **相关发现**：使用 `!related` 发现相关内容

## 🚀 快速开始

### 第一次使用
1. 发送一个网址试试：
   ```
   https://arxiv.org/abs/2304.08424
   ```

2. 查看统计信息：
   ```
   !stats
   ```

3. 搜索感兴趣的内容：
   ```
   !grep 人工智能
   ```

### 常用工作流程
1. **内容收集**：发送 URL 或使用 `!wget`
2. **搜索查找**：使用 `!grep` 或 `!egrep` 查找相关内容
3. **关系探索**：使用 `!related` 发现相关文档
4. **定期回顾**：使用 `!tail` 查看最近收集的内容

## ⚠️ 注意事项

- 所有搜索都不区分大小写
- 搜索结果限制在前5个，避免信息过载
- 长 URL 会自动截断显示
- 系统同时维护新旧两套索引确保兼容性
- ArXiv 论文会进行专门的学术分析
- 生成的内容包含适合 Obsidian 的内部链接格式

## 🎨 响应格式

机器人的回复采用结构化格式：
- 📅 时间戳
- 🏷️ 文档类型标签  
- 🔑 关键词列表
- 📝 内容摘要
- 🔗 原始链接

这样的格式便于快速浏览和理解内容重点。

---

**提示：** 如需更多帮助，可以查看各个命令的实际效果来熟悉机器人功能！
